<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DarkElf App Service</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .nav-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .nav-card {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 25px;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-card:hover {
            transform: translateY(-2px);
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            color: inherit;
            text-decoration: none;
        }
        
        .nav-card h3 {
            margin: 0 0 15px 0;
            color: #667eea;
            font-size: 1.3em;
        }
        
        .nav-card p {
            margin: 0;
            opacity: 0.8;
            line-height: 1.5;
        }
        
        .app-canvas {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            min-height: 400px;
            border: 1px solid #404040;
        }
        
        .status-bar {
            background: #333;
            padding: 10px 20px;
            border-radius: 4px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 0.9em;
            border-left: 4px solid #667eea;
        }
        
        .error-message {
            background: #4a1a1a;
            color: #ff6b6b;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            border-left: 4px solid #ff6b6b;
        }
        
        .success-message {
            background: #1a4a1a;
            color: #4ecdc4;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            border-left: 4px solid #4ecdc4;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .nav-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü DarkElf App Service</h1>
        </div>
        
        <div class="nav-section">
            <a href="/draw" class="nav-card">
                <h3>‚úèÔ∏è Drawing Module</h3>
                <p>Interactive canvas drawing tools with shape primitives, custom brushes, and layer support. Create and edit visual elements for laser projection.</p>
            </a>
            
            <a href="/pattern-editor" class="nav-card">
                <h3>üé® Pattern Editor</h3>
                <p>Advanced pattern creation and editing interface. Design complex geometric patterns, animations, and sequences for laser shows.</p>
            </a>
        </div>
        
        <div class="status-bar">
            Status: <span id="status">Initializing...</span> | 
            Build: <span id="build-info">Loading...</span>
        </div>
        
        <div class="app-canvas" id="app-container">
            <!-- Application content will be loaded here -->
        </div>
    </div>

    <script>
        // Initialize status
        document.getElementById('status').textContent = 'Ready';
        document.getElementById('build-info').textContent = 'Web Version 1.0.0';
        
        // Global app state
        window.darkelfApp = {
            initialized: false,
            modules: {},
            status: 'ready'
        };
        
        // Utility functions for the app
        window.showStatus = function(message, type = 'info') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = type;
        };
        
        window.showError = function(message) {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="error-message">
                    <strong>Error:</strong> ${message}
                </div>
            `;
        };
        
        window.showSuccess = function(message) {
            const container = document.getElementById('app-container');
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `<strong>Success:</strong> ${message}`;
            container.insertBefore(successDiv, container.firstChild);
        };
        
        // Route handling
        window.loadModule = function(moduleName) {
            showStatus(`Loading ${moduleName}...`, 'loading');
            
            // Clear previous content
            document.getElementById('app-container').innerHTML = '';
            
            try {
                // This will be handled by the actual app service
                if (typeof window.appService !== 'undefined') {
                    window.appService.loadModule(moduleName);
                } else {
                    showError(`App service not loaded. Module: ${moduleName}`);
                }
            } catch (error) {
                showError(`Failed to load ${moduleName}: ${error.message}`);
            }
        };
        
        // Handle navigation
        const path = window.location.pathname;
        if (path === '/draw') {
            loadModule('draw');
        } else if (path === '/pattern-editor') {
            loadModule('pattern-editor');
        } else {
            showStatus('Select a module to begin');
        }
        
        // Console welcome message
        console.log('%cüåü DarkElf App Service', 'color: #667eea; font-size: 16px; font-weight: bold;');
        console.log('Available modules: draw, pattern-editor');
        console.log('Use window.loadModule(name) to load modules programmatically');
    </script>
    
    <!-- Load the main app service bundle -->
    <script src="/app-service-meanified.js"></script>
</body>
</html>